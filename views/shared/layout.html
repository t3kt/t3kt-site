{%- import "./common.html" as common -%}
{%- if not isAjax -%}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="author" content="{{ siteAuthor }}"/>
  <title>{{ siteTitle }}: {% block doc_title %}{{ pageTitle }}{% endblock %}</title>
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css"/>
  <link rel="shortcut icon" href="/images/favicon.png">
  {%- if not isAjax -%}
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  {%- endif -%}
</head>
<body>
{%- endif -%}
{%- if not isContentOnly -%}
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">{{ siteTitle }}</a>
    </div>
    {% include "./nav-menu.html" %}
  </div>
</nav>
<header id="page-header">
  <h2>
    {% block page_title %}
    {{ pageTitle }}
    {% endblock %}
  </h2>
</header>
<main data-routeid="{{ routeId }}" {% if pageParams %} data-page-params="{{ pageParams|json }}" {% endif %}>
  {%- endif -%}
  {%- block content -%}
  {%- endblock -%}
  {%- if not isContentOnly -%}
</main>
{{ common.banner_style(bannerUrl) }}
{%- if not isAjax -%}
<script src="/bootstrap/js/bootstrap.min.js"></script>
{%- endif -%}
{%- if not isAjax and analyticsSiteId -%}
<script>
  var _gas = _gas || [];
  _gas.push(['_setAccount', {{analyticsSiteId|json|raw}}]);
  _gas.push(['_setDomainName', {{analyticsDomain|json|raw}}]);
  _gas.push(['_trackPageview']);
  _gas.push(['_gasTrackForms']);
  _gas.push(['_gasTrackOutboundLinks']);
  _gas.push(['_gasTrackMaxScroll']);
  _gas.push(['_gasTrackDownloads']);
  _gas.push(['_gasTrackYoutube', {force: true}]);
  _gas.push(['_gasTrackVimeo', {force: true}]);
  (function() {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = '//cdnjs.cloudflare.com/ajax/libs/gas/1.10.1/gas.min.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
{%- endif -%}
{%- endif -%}